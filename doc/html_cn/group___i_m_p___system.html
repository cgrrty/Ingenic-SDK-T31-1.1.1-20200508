<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ISVP-SDK: IMP_System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ISVP-SDK
   &#160;<span id="projectnumber">T30-1.0.1</span>
   </div>
   <div id="projectbrief">Ingenic Smart Video Platform SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="modules.html"><span>模块</span></a></li>
      <li><a href="annotated.html"><span>结构体</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">结构体</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">IMP_System<div class="ingroups"><a class="el" href="group__imp.html">IMP(Ingenic Media Platform)</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>系统控制模块，包括IMP的基础功能以及模块间绑定的相关功能  
<a href="#details">更多...</a></p>
<div class="dynheader">
IMP_System 的协作图:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___i_m_p___system.png" border="0" alt="" usemap="#group______i__m__p______system"/>
<map name="group______i__m__p______system" id="group______i__m__p______system">
<area shape="rect" id="node2" href="group__imp.html" title="IMP(Ingenic Media Platform)" alt="" coords="7,5,193,35"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
结构体</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_m_p_version.html">IMPVersion</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMP系统版本号定义.  <a href="struct_i_m_p_version.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:gaad7c81108a7083275a367446fd7aca34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gaad7c81108a7083275a367446fd7aca34">IMP_System_Init</a> (void)</td></tr>
<tr class="memdesc:gaad7c81108a7083275a367446fd7aca34"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMP系统初始化.  <a href="#gaad7c81108a7083275a367446fd7aca34">更多...</a><br /></td></tr>
<tr class="separator:gaad7c81108a7083275a367446fd7aca34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefcc500e7341780f43b89fe79499365e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gaefcc500e7341780f43b89fe79499365e">IMP_System_Exit</a> (void)</td></tr>
<tr class="memdesc:gaefcc500e7341780f43b89fe79499365e"><td class="mdescLeft">&#160;</td><td class="mdescRight">IMP系统去初始化.  <a href="#gaefcc500e7341780f43b89fe79499365e">更多...</a><br /></td></tr>
<tr class="separator:gaefcc500e7341780f43b89fe79499365e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad68f51c90e4b9767ae0e630f43b0e393"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gad68f51c90e4b9767ae0e630f43b0e393">IMP_System_GetTimeStamp</a> (void)</td></tr>
<tr class="memdesc:gad68f51c90e4b9767ae0e630f43b0e393"><td class="mdescLeft">&#160;</td><td class="mdescRight">获得IMP系统的时间戳，单位为微秒。  <a href="#gad68f51c90e4b9767ae0e630f43b0e393">更多...</a><br /></td></tr>
<tr class="separator:gad68f51c90e4b9767ae0e630f43b0e393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab874319e64261966350d807b4b97804a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gab874319e64261966350d807b4b97804a">IMP_System_RebaseTimeStamp</a> (int64_t basets)</td></tr>
<tr class="memdesc:gab874319e64261966350d807b4b97804a"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置IMP系统的时间戳，单位为微秒。  <a href="#gab874319e64261966350d807b4b97804a">更多...</a><br /></td></tr>
<tr class="separator:gab874319e64261966350d807b4b97804a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d59d9242046c456aa5dfd25547a47db"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#ga9d59d9242046c456aa5dfd25547a47db">IMP_System_ReadReg32</a> (uint32_t regAddr)</td></tr>
<tr class="memdesc:ga9d59d9242046c456aa5dfd25547a47db"><td class="mdescLeft">&#160;</td><td class="mdescRight">读取32位寄存器的值。  <a href="#ga9d59d9242046c456aa5dfd25547a47db">更多...</a><br /></td></tr>
<tr class="separator:ga9d59d9242046c456aa5dfd25547a47db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f10436194b07b600047ca926cc3660c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#ga2f10436194b07b600047ca926cc3660c">IMP_System_WriteReg32</a> (uint32_t regAddr, uint32_t value)</td></tr>
<tr class="memdesc:ga2f10436194b07b600047ca926cc3660c"><td class="mdescLeft">&#160;</td><td class="mdescRight">向32位寄存器中写值。  <a href="#ga2f10436194b07b600047ca926cc3660c">更多...</a><br /></td></tr>
<tr class="separator:ga2f10436194b07b600047ca926cc3660c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1350c4d1dfdef3d95b92c981fee82ad2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#ga1350c4d1dfdef3d95b92c981fee82ad2">IMP_System_GetVersion</a> (<a class="el" href="struct_i_m_p_version.html">IMPVersion</a> *pstVersion)</td></tr>
<tr class="memdesc:ga1350c4d1dfdef3d95b92c981fee82ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取IMP系统版本号.  <a href="#ga1350c4d1dfdef3d95b92c981fee82ad2">更多...</a><br /></td></tr>
<tr class="separator:ga1350c4d1dfdef3d95b92c981fee82ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6bd7318365f365afd757f6b4046802d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gaf6bd7318365f365afd757f6b4046802d">IMP_System_GetCPUInfo</a> (void)</td></tr>
<tr class="memdesc:gaf6bd7318365f365afd757f6b4046802d"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取CPU型号信息.  <a href="#gaf6bd7318365f365afd757f6b4046802d">更多...</a><br /></td></tr>
<tr class="separator:gaf6bd7318365f365afd757f6b4046802d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab53c6fd017fab6386696320af29354ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a> (<a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *srcCell, <a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *dstCell)</td></tr>
<tr class="memdesc:gab53c6fd017fab6386696320af29354ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">绑定源Cell和目的Cell.  <a href="#gab53c6fd017fab6386696320af29354ed">更多...</a><br /></td></tr>
<tr class="separator:gab53c6fd017fab6386696320af29354ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga759fa36b68ecc83e15362316809ba23d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#ga759fa36b68ecc83e15362316809ba23d">IMP_System_UnBind</a> (<a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *srcCell, <a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *dstCell)</td></tr>
<tr class="memdesc:ga759fa36b68ecc83e15362316809ba23d"><td class="mdescLeft">&#160;</td><td class="mdescRight">解除源Cell和目的Cell的绑定.  <a href="#ga759fa36b68ecc83e15362316809ba23d">更多...</a><br /></td></tr>
<tr class="separator:ga759fa36b68ecc83e15362316809ba23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9f076d33c9f09b238fc958851b8799b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_m_p___system.html#gae9f076d33c9f09b238fc958851b8799b">IMP_System_GetBindbyDest</a> (<a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *dstCell, <a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *srcCell)</td></tr>
<tr class="memdesc:gae9f076d33c9f09b238fc958851b8799b"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取绑定在目的Cell的源Cell信息.  <a href="#gae9f076d33c9f09b238fc958851b8799b">更多...</a><br /></td></tr>
<tr class="separator:gae9f076d33c9f09b238fc958851b8799b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p>系统控制模块，包括IMP的基础功能以及模块间绑定的相关功能 </p>
<h1><a class="anchor" id="concept"></a>
1 相关概念</h1>
<p>系统控制主要实现连接各模块，定义数据流的功能。以下是一些重要概念：</p>
<h2><a class="anchor" id="device"></a>
1.1 Device</h2>
<p>Device是完成某一（类）功能的集合。如FrameSource完成视频源数据的输出，Encoder完成视频编码或者图像编码的功能。这里的FrameSource和Encoder就是Device的概念。<br />
Device只是一个集合的概念，并不是具体的数据流节点。</p>
<h2><a class="anchor" id="group"></a>
1.2 Group</h2>
<p>Group是一路数据输入的最小单位。一个Device可以有多个Group，每个Group只能接收一路数据输入。Group可以有多路输出（<a class="el" href="group___i_m_p___system.html#output">1.3 Output</a> ）。<br />
Group也是具体”功能“的容器，可以详见<a class="el" href="group___i_m_p___system.html#channel">1.5 Channel</a> 部分的解释。</p>
<h2><a class="anchor" id="output"></a>
1.3 Output</h2>
<p>Output是一个Group的一路数据输出的最小单位。一个Group可以有多个Output，每个Output只能输出一路数据。</p>
<h2><a class="anchor" id="cell"></a>
1.4 Cell</h2>
<p>Cell指包含了Device、Group、Output信息的集合。以IMPCell的数据结构呈现。<br />
Cell主要用来Bind（bind）。根据Device、Group、Output的定义，Output作为数据输出的节点，而Group作为数据输入的节点。<br />
在Bind时数据输出节点的Cell索引到输出的Output，数据输入节点的Cell索引到输入的Group（因此作为数据输入的Cell，Output是一个无意义值）。</p>
<h2><a class="anchor" id="channel"></a>
1.5 Channel</h2>
<p>Channel通常指一个单一功能的单元，Channel在Create时(实例化)时被指定具体功能。<br />
例如：<br />
</p><ul>
<li>对于Encoder，一个Channel完成一路H264编码或者JPEG编码的功能，具体的编码功能(类型，参数)在通道创建时指定</li>
<li>对于IVS，一个Channel完成一个具体的算法的功能，具体的算法类型参数在通道创建时指定</li>
<li>对于OSD，有一个同Channel类似的概念Region，一个Region是一个具体的叠加区域，可以是PIC(图像)，COVER(遮挡)等</li>
<li>对于FrameSource，一个Channel输出一路原始图像，FrameSource的Channel实际上就是Group</li>
</ul>
<p>Channel作为功能单元，通常需要Register到Group中(FrameSource除外)，才能接收到数据。Channel注册到Group中后，会得到Group输入的数据。<br />
不同Device的Group可Register的Channel数也不同。</p>
<h1><a class="anchor" id="bind"></a>
2 模块绑定（Bind）</h1>
<p>两个Group经过Bind连接后，源Group的数据会自动发到目的Group。<br />
由于Group是数据输入的最小单元，Output是数据输出的最小单元，因此IMP_System_Bind(IMPCell *srcCell, IMPCell *dstCell)的两个参数中srcCell的deviceID, groupID, outputID是有效的 而dstCell仅deviceID和groupID有效，outputID作为数据输入是无意义的。<br />
下图是一个简单Bind的例子。 </p><div class="image">
<img src="system_bind0.jpg" alt="system_bind0.jpg"/>
</div>
<p> 在上图中，实现了FrameSource的一路输出Bind到Encoder的一个Group。 在Encoder Group中Register了两个Channel，因此Encoder Group有H264和JPEG两路输出。 参考代码： </p><div class="fragment"><div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> fs_chn0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a162de33439c347ecba2e19b30644b208">DEV_ID_FS</a>, 0, 0};                    <span class="comment">//FrameSource deviceID:DEV_ID_FS groupID:0 outputID:0</span></div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> enc_grp0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a132bce719450c185ea6fe09090e39c9c">DEV_ID_ENC</a>, 0, 0};          <span class="comment">//ENC deviceID:DEV_ID_ENC groupID:0 outputID:0, 这里enc_grp0的第三个参数无意义。</span></div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;fs_chn0, &amp;enc_grp0);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind FrameSource Channel0 and Encoder Group0 failed\n&quot;</span>);</div>
</div><!-- fragment --><p> Bind将系统的数据流串接起来，根据不同的产品功能需求，Bind的策略也可能不同。</p>
<p>以下是典型双路码流产品应用Bind的示意图：</p>
<div class="image">
<img src="typical_application.png" alt="typical_application.png"/>
</div>
<p>上图中，FrameSource有两路输出，分别是Channel0主码流(1280x720)和Channel1从码流(640x360)。<br />
</p><ul>
<li>主码流：FrameSource的Channel0 Bind OSD Group.0，OSD Group.0 Bind Encoder Group.0。其中：<ul>
<li>OSD Group.0 注册了两个Region，分别用来显示时间戳和字符串信息</li>
<li>Encoder Group.0 注册了两个Channel，分别进行H264编码和JPEG编码。其中JPEG编码通道的图像大小如果不等于输入设置（FrameSource的Channel0），那么就会进行缩放(Software at T10)，达到任意分辨率抓拍的目的</li>
</ul>
</li>
<li>从码流：FrameSource的Channel1 Bind IVS Group.0，IVS Group.0 Bind OSD Group.1，OSD Group.1 Bind Encoder Group.1。其中：<ul>
<li>IVS Group.0 注册了一个Channel，用来进行移动侦测</li>
<li>OSD Group.1 注册了两个Region，分别用来显示时间戳和字符串信息</li>
<li>Encoder Group.1 注册了一个Channel，进行H264编码</li>
<li>这里值得注意的一点是，IVS Bind 在 OSD之前，是因为OSD的时间戳可能造成IVS移动侦测的误判</li>
</ul>
</li>
</ul>
<p>参考代码：<br />
主码流数据流Bind： </p><div class="fragment"><div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> fs_chn0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a162de33439c347ecba2e19b30644b208">DEV_ID_FS</a>, 0, 0};</div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> osd_grp0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7aaaafd084a936f2a8b60bb5e13e30acba">DEV_ID_OSD</a>, 0, 0};</div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> enc_grp0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a132bce719450c185ea6fe09090e39c9c">DEV_ID_ENC</a>, 0, 0};</div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;fs_chn0, &amp;osd_grp0);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind FrameSource Channel0 and OSD Group0 failed\n&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;osd_grp0, &amp;enc_grp0);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind OSD Group0 and Encoder Group0 failed\n&quot;</span>);</div>
</div><!-- fragment --><p> 从码流数据流Bind： </p><div class="fragment"><div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> fs_chn1_output0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a162de33439c347ecba2e19b30644b208">DEV_ID_FS</a>, 1, 0};</div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> ivs_grp0 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7ae0021eea40513cbb341cd5078bca3da6">DEV_ID_IVS</a>, 0, 0};</div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> osd_grp1 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7aaaafd084a936f2a8b60bb5e13e30acba">DEV_ID_OSD</a>, 1, 0};</div>
<div class="line"><a class="code" href="struct_i_m_p_cell.html">IMPCell</a> enc_grp1 = {<a class="code" href="imp__common_8h.html#a6dadfc8115cc4a18ce760e442584c4e7a132bce719450c185ea6fe09090e39c9c">DEV_ID_ENC</a>, 1, 0};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;fs_chn1_output0, &amp;ivs_grp0);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind FrameSource Channel1 and IVS Group0 failed\n&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;ivs_grp0, &amp;osd_grp1);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind IVS Group0 and OSD Group1 failed\n&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> ret = <a class="code" href="group___i_m_p___system.html#gab53c6fd017fab6386696320af29354ed">IMP_System_Bind</a>(&amp;osd_grp1, &amp;enc_grp1);</div>
<div class="line"><span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bind OSD Group1 and Encoder Group1 failed\n&quot;</span>);</div>
</div><!-- fragment --><dl class="section attention"><dt>注意</dt><dd>建议所有的Bind的操作在系统初始化时进行。 </dd>
<dd>
在FrameSource使能后Bind和UnBind操作不能动态调用，需要Disable FrameSource后才可进行UnBind。 </dd>
<dd>
DestroyGroup要在UnBind之后才能进行。</dd></dl>
<p>Bind可以呈树状结构，下图是一个例子： </p><div class="image">
<img src="different_output.png" alt="different_output.png"/>
</div>
<p> 上图中，FrameSource的Channel 1(Group.1)后端分别Bind了两个Group，分别从Output.0和 Output.1输出数据。本例中这样Bind的好处是，IVS Group可以与OSD Group.1并行工作。 </p><dl class="section attention"><dt>注意</dt><dd>此例中的Bind方式可能对普通移动侦测造成影响，因此普通移动侦测不建议采用这种方式。 </dd></dl>
<h2 class="groupheader">函数说明</h2>
<a class="anchor" id="gab53c6fd017fab6386696320af29354ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_Bind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>srcCell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>dstCell</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>绑定源Cell和目的Cell. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">srcCell</td><td>源Cell指针. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dstCell</td><td>目的Cell指针.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>根据Device、Group和Output的概念，每个Device可能有多个Group，每个Group可能有多个Output， Group作为Device的输入接口，而Output作为Device的输出接口.因此绑定实际上是将输出Device的某 个Output连接到输入Device的某个Group上. </dd>
<dd>
绑定关系成功后，源Cell(Output)产生的数据会自动传送到目的Cell(Group).</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="gaefcc500e7341780f43b89fe79499365e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_Exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IMP系统去初始化. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">无.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>此函数调用后会释放IMP所有的内存以及句柄，并关闭硬件单元.</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>在调用此API后，若要再次使用IMP则需重新进行IMP系统初始化. </dd></dl>

</div>
</div>
<a class="anchor" id="gae9f076d33c9f09b238fc958851b8799b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_GetBindbyDest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>dstCell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>srcCell</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取绑定在目的Cell的源Cell信息. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dstCell</td><td>目的Cell指针. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">srcCell</td><td>源Cell指针.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无.</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="gaf6bd7318365f365afd757f6b4046802d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * IMP_System_GetCPUInfo </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取CPU型号信息. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">无.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">CPU型号字符串.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>返回值是CPU型号类型的字符串,例如对于T10来说,有"T10"及"T10-Lite".</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无. </dd></dl>

</div>
</div>
<a class="anchor" id="gad68f51c90e4b9767ae0e630f43b0e393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t IMP_System_GetTimeStamp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获得IMP系统的时间戳，单位为微秒。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">无。</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">时间(usec)</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>系统初始化后时间戳自动被初始化。系统去初始化后时间戳失效。</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="ga1350c4d1dfdef3d95b92c981fee82ad2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_GetVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_version.html">IMPVersion</a> *&#160;</td>
          <td class="paramname"><em>pstVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取IMP系统版本号. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pstVersion</td><td>IMP系统版本号结构体指针.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无.</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无. </dd></dl>

</div>
</div>
<a class="anchor" id="gaad7c81108a7083275a367446fd7aca34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IMP系统初始化. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">无.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>此API调用后会初始化基础的数据结构，但不会初始化硬件单元.</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>在IMP的任何操作之前必须先调用此接口进行初始化. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9d59d9242046c456aa5dfd25547a47db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t IMP_System_ReadReg32 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>u32Addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>读取32位寄存器的值。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">regAddr</td><td>寄存器的物理地址。</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">寄存器的值（32位）</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无。</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="gab874319e64261966350d807b4b97804a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_RebaseTimeStamp </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>basets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置IMP系统的时间戳，单位为微秒。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">basets</td><td>基础时间。</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无。</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="ga759fa36b68ecc83e15362316809ba23d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IMP_System_UnBind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>srcCell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_m_p_cell.html">IMPCell</a> *&#160;</td>
          <td class="paramname"><em>dstCell</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>解除源Cell和目的Cell的绑定. </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">srcCell</td><td>源Cell指针. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dstCell</td><td>目的Cell指针.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>成功. </td></tr>
    <tr><td class="paramname">非0</td><td>失败.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无.</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>无。 </dd></dl>

</div>
</div>
<a class="anchor" id="ga2f10436194b07b600047ca926cc3660c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMP_System_WriteReg32 </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>regAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>向32位寄存器中写值。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">regAddr</td><td>寄存器的物理地址。 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>要写入的值。</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname">无</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>备注</dt><dd>无。</dd></dl>
<dl class="section attention"><dt>注意</dt><dd>在不明确寄存器的含义之前请谨慎调用此API，否则可能会导致系统错误。 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
生成于 2020年 五月 8日 星期五 16:09:31 , 为 ISVP-SDK使用  &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
